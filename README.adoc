= DotMatrix-FilePrinter (Enhanced Suite)
:author: Jonathan D.A. Jewell
:revnumber: 2026.01.14
:doctype: book
:toc: macro
:sectnums:
:icons: font

[abstract]
A Neurosymbolic approach to filesystem manipulation. This tool treats the filesystem as a 24-pin dot-matrix substrate for deterministic, byte-level injection, eliminating encoding drift and NBSP contamination.

toc::[]

== 1. Philosophy: The Physical Byte
This suite treats the filesystem not as a collection of high-level abstractions, but as a physical tape where every bit is a mechanical strike. By utilizing a **Forth Kernel** as the primary "Print Head," we ensure that the **physical byte is the ultimate source of truth.**

* **Neural Layer:** `rescript-tea` + `cadre-tea-router` (Visualising intent and routing).
* **Symbolic Layer:** `Nickel` (Defining the declarative contract and metadata).
* **Physical Layer:** `Forth` (Stack-based deterministic execution).
* **Bridge Layer:** `rescript-tauri-ffi` (Type-safe OS-level integration).

== 2. Technical Stack & Requirements

The suite is built for cross-platform stability (Linux, Minix, macOS, iOS, Android, and PC).

* **Orchestration:** `just` (strictly no `make`).
* **Configuration:** `Nickel` (exporting to Forth/JSON).
* **Frontend:** `ReScript` + `rescript-tea`.
* **Backend:** `Tauri (Rust)` + `Gforth`.
* **Verification:** `hexdump` + `grep` (Binary verification).

== 3. Must-Just-Nickel Workflow

All automation is managed via `just`. The following recipes are defined in the `justfile`.

[source,bash]
----
# Default: Full Neurosymbolic Strike
just all

# Physical Strike: Injects bytes via Forth Kernel
# Usage: just strike "104,101,108,108,111"
just strike <bytes>

# Verification: Prove the substrate is ASCII-clean (no 0xA0)
just verify <target_file>

# Deploy: Package as a Podman container
just deploy
----

== 4. Component Architecture

=== 4.1 The Forth Kernel (`kernel/striker.fth`)
The "Print Head" logic. It processes the stack into a vertical 24-pin alignment.

=== 4.2 The TEA UI (`src/App.res`)
Uses `rescript-tea` to provide a real-time monitor of the Forth stack and the "Inking" path on the substrate grid.

=== 4.3 Nickel Contracts (`config/meta.ncl`)
Symbolic constraints that prevent "Neural Drift." It ensures no byte > 127 is ever passed to the physical striker.

== 5. Multi-Shell Registry

While the primary logic resides in the `justfile` and `bash` wrappers, the suite provides native shims for 18+ shells in `bin/references/`.

[cols="1,2,2"]
|===
| Shell Type | Reference Script | Context

| **Bash** | `bin/strike.sh` | Primary/README Default
| **Powershell-Core** | `bin/references/strike.ps1` | PC/Windows Substrates
| **Minix Shell** | `bin/references/strike.sh` | Minimalist
|===

== 6. Deployment & Edge Tech

Following a **nerdctl-first** commitment, the suite is containerized for deterministic behavior across different host substrates. For **ASICs** or **Edge tech**, the Forth kernel is compiled into a standalone binary using `gforth` cross-compilation.

[IMPORTANT]
If you require a build automation change, update the `justfile` and the `Cookbook.adoc`.

== 7. Verification Proofs

To verify a strike, do not use `cat` or `nano`. Use the physical truth:

[source,bash]
----
hexdump -C dist/substrate.bin
----

---

== 8. Appendix: Cookbook
See `Cookbook.adoc` for a full list of physical strike patterns and Forth-stack operation mappings.
----
